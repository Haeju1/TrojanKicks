<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <title>TrojanKicks</title>
    <link rel="stylesheet" href="./style.css">
    <link href="https://fonts.googleapis.com/css?family=Nunito+Sans&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
  </head>
  <body>
    <header class="flex-container">
      <img id="pic" src="" alt="logo" width="50px" alt="Logo">
      <nav>
        <span><a href="#sale">For Sale</a></span>
        <span><a href="#about">About</a></span>
        <span><a href="#policies">Policies</a></span>
      </nav>
    </header>
    <div class="main">
      <h1>TrojanKicks</h1>
    </div>
    <!--Listings-->
    <h2>Listings</h2>
    <div class="flex-container">
      <div id="listings">

      </div>

    </div>

    <!--About-->
    <div class="about">
      <h2>About TrojanKicks</h2>
      <div class="flex-container">
        <p>TrojanKicks is a local business dedicated to </p>
      </div>
    </div>
    <div class="policies">
      <h2>Policies and Guidelines</h2>
      <div class="flex-container">
        <ol>
          <li>There are absolutely no refunds, unless the product is deemed as a replica / fake model</li>
          <li>All products will be shipped within one week by USPS Priority Mail</li>
          <li>All items are brand new with original boxes</li>
          <li>TorjanKicks is not responsible for a failed delivery due to incorrect addresses</li>
          <li>Tracking information will be provided once item is shipped via email</li>
        </ol>
      </div>
    </div>
    <!--
    <script

  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous">
    </script>
    -->
    <div id="listings">

    </div>
    <script type="text/babel">
    class Products extends React.Component{
      constructor(props){
        super(props);
        this.state = {
          products: []
        }
      }
      async componentDidMount(){
        let data = await fetch('http://localhost:4000/api/products');
        let dataJson = await data.json();
        this.setState({
          products: dataJson
        });
        let products=this.state.products;
        console.log('Data: ')
        console.log(this.state.products);

      }
      render(){
        let products = this.state.products;
        console.log(this.state.products);

        products=products.map((product,index)=>{
          console.log('name '+product.name);
          let purchaseLink ='http://localhost:4000/api/pay?_id='+product._id;
          return(
            <div key={product._id} className="product">
                <img src={product.photoURL}></img>
                <div className="item_details">
                  <h1 className="name">{product.name} Size {product.size}</h1>
                  <h1 className="price">${product.price}</h1>
                  <form className="paypal" action={purchaseLink} method='post'>
                    <input type="image" id="paypal_button"src="https://www.paypalobjects.com/webstatic/en_US/i/buttons/checkout-logo-small.png" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!"></input>
                  </form>

                </div>

            </div>
          );
        });
        return(
          <div className="listings">
            <h3>{products}</h3>
          </div>
        )
      }
    }
    ReactDOM.render(<Products />,document.getElementById('listings'));
    </script>
  </body>
  <footer>
  </footer>
</html>
