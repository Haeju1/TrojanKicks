<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <title>TrojanKicks</title>
    <link rel="stylesheet" href="./style.css">
    <link href="https://fonts.googleapis.com/css?family=Nunito+Sans&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
  </head>
  <body>
    <header class="flex-container">
      <nav>
        <span><a href="#sale">For Sale</a></span>
        <span><a href="#about">About</a></span>
        <span><a href="#policies">Policies</a></span>
      </nav>
    </header>
    <div class="main">
      <div class="flex-container">
        <img id="pic" src="https://lh3.googleusercontent.com/h3rvm6-y96Ldqh-Q2IC9XyUS1LpVu-ZxMAvB8CLmcE6K62xsJfdJ6ZoH5mHP_58GQVsXYYZoe7bGyB-ULJm6K8mis717IXi2Em-QgALzGI5wJYLtGA-fsKiorVh_9VXjO7el_PWeMYgmOVfuw2m0SMoenccF76O6LwW8teNXev0P6T7IctDTG8_lcJmd3Wbrd8vi1fXYDWKwIrmNF9sAp8VYYXBM5aLLcylXYTgBcPyr3HdijMH-duox4MuLMGVG9iuE5CCLcVhxOdmtXibbclP3U-uLIiJw3HqYQ4bl868ZnqZEHRKdTNgUXHOwHoX9NIQK3BWI4Y8SGLl5Lhl5C1d9R6nOtUZKmpaci1OncaAuwCEcgMb6Vv6KZVMZxY5xAHLAsKnRz-RZOsuJGaSKamMOdf2i7ICV2gWDurE9HuRrb8uTtmsQXMisMcBJjKQIujZhISMLa6xrI18Snh4FL72h0osEm6FLic-tAIvj65tVpSGwBkxefSXkGOdfkvYMX738H5WNSTSSAPdcMFuD5sRXFOAd6ajenp16eWeKxWNt2cBXv7UZ0aZpGMAKOJkRvjA1Rsn4YdTgXBPM0Y3ZBL5otq1tqrAnx5jtxojb0J11BZZSVZDw65h4EIvHGrVcSU4jg-51_xcA75KmeuSDQQUGnxcvxg=w498-h497-no"
        alt="logo" width="200px" alt="Logo">
        <h1>TrojanKicks</h1>
      </div>

    </div>
    <!--Listings-->
    <div id="sale">
      <h2>Listings</h2>
      <div class="flex-container">
        <div id="listings">
        </div>
      </div>
    </div>

    <!--About-->
    <div id="about">
      <h2>About TrojanKicks</h2>
      <div class="flex-container">
        <p>Hi my name is Haeju Jeong, and I am the owner of TrojanKicks. This business serves as a combination of my interests in sneaker resell
          and web development. This website was coded with the MERN stack and hosted on heroku. Data regarding products and order details are stored on mongoDB Atlas.
          All payments are handled and stored securely via Paypal. Stripe will be implemented in the future.</p>
      </div>
    </div>
    <div id="policies">
      <h2>Policies and Guidelines</h2>
      <div class="flex-container">
        <ol>
          <li>There are absolutely no refunds, unless the product is deemed as a replica / fake model</li>
          <li>All products will be shipped within one week by USPS Priority Mail</li>
          <li>All items are brand new with original boxes</li>
          <li>TorjanKicks is not responsible for a failed delivery due to incorrect addresses</li>
          <li>Tracking information will be provided once item is shipped via email</li>
        </ol>
      </div>
    </div>
    <!--
    <script

  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous">
    </script>
    -->
    <div id="listings">

    </div>
    <script type="text/babel">
    class Products extends React.Component{
      constructor(props){
        super(props);
        this.state = {
          products: []
        }
      }
      async componentDidMount(){
        console.log('Before trying to get products');
        let data = await fetch('https://trojankicks.herokuapp.com/api/product');
        let dataJson = await data.json();
        this.setState({
          products: dataJson
        });
        let products=this.state.products;
        console.log('Data: ')
        console.log(this.state.products);
      }
      render(){
        let products = this.state.products;
        console.log(this.state.products);

        products=products.map((product,index)=>{
          console.log('name '+product.name);
          let purchaseLink ='https://trojankicks.herokuapp.com/api/pay?_id='+product._id;
          return(
            <div key={product._id} className="product">
                <img src={product.photoURL}></img>
                <div className="item_details">
                  <h1 className="name">{product.name} Size {product.size}</h1>
                  <h1 className="price">${product.price}</h1>
                  <form className="paypal" action={purchaseLink} method='post'>
                    <input type="image" id="paypal_button"src="https://www.paypalobjects.com/webstatic/en_US/i/buttons/checkout-logo-small.png" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!"></input>
                  </form>
                </div>
            </div>
          );
        });
        return(
          <div className="listings">
            <h3>{products}</h3>
          </div>
        )
      }
    }
    ReactDOM.render(<Products />,document.getElementById('listings'));
    </script>
  </body>
  <footer>
  </footer>
</html>
